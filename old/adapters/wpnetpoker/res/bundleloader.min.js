function BundleLoader(){var a;this.element=document.createElement("div"),this.element.className="bundleloader",a=this.element.style,a.position="fixed",a.top="0",a.left="0",a.width="100%",a.height="100%",a.background="#000000",a.display="none",a.zIndex=1,this.titleElement=document.createElement("div"),this.titleElement.innerHTML="LOADING",a=this.titleElement.style,a.position="absolute",a.top="50%",a.width="100%",a.left="0",a.height="100px",a.color="#ffffff",a.textAlign="center",a.fontFamily="arial",a.fontSize="17px",a.marginTop="-32px",this.element.appendChild(this.titleElement),this.borderElement=document.createElement("div"),a=this.borderElement.style,a.width="33%",a.height="10px",a.border="2px solid white",a.borderRadius="5px",a.marginLeft="auto",a.marginRight="auto",a.top="50%",a.position="relative",a.padding="2px",this.element.appendChild(this.borderElement),this.progressElement=document.createElement("div"),a=this.progressElement.style,a.background="#ffffff",a.height="10px",a.width="0%",a.left="0",a.borderRadius="2px",a.position="relative",this.borderElement.appendChild(this.progressElement),this.animateInterval=null,this.loadRequest=null,this.completeProgress=null,this.waitForBody()}var proto=BundleLoader.prototype;proto.waitForBody=function(){return document.body?void document.body.appendChild(this.element):void setTimeout(this.waitForBody.bind(this),0)},proto.showProgress=function(a,b){this.title=a,this.animateInterval&&clearInterval(this.animateInterval),this.animateInterval=null,this.element.style.display="block",this.titleElement.innerHTML=a,this.borderElement.style.display="block",null!=b&&void 0!=b?(b=Math.min(100,parseFloat(b)),this.progressElement.style.left="0",this.progressElement.style.width=b+"%"):(this.animateInterval=setInterval(this.onAnimateInterval.bind(this),30),this.progressElement.style.width="33%",this.progressElement.style.left="0%")},proto.showMessage=function(a){this.title=a,this.animateInterval&&clearInterval(this.animateInterval),this.animateInterval=null,this.element.style.display="block",this.titleElement.innerHTML=a,this.borderElement.style.display="none"},proto.onAnimateInterval=function(){var a=parseFloat(this.progressElement.style.left);a+=3,a>67&&(a=0),this.progressElement.style.left=a+"%"},proto.hide=function(){this.animateInterval&&clearInterval(this.animateInterval),this.animateInterval=null,this.element.style.display="none"},proto.load=function(a,b,c){if(b||(b="LOADING"),this.completeProgress=c,this.completeProgress||(this.completeProgress=100),this.loadRequest)throw new Error("Already loading");this.loadRequest=new XMLHttpRequest,this.loadRequest.open("GET",a,!0),this.loadRequest.responseType="arraybuffer",this.loadRequest.onprogress=this.onLoadRequestProgress.bind(this),this.loadRequest.onload=this.onLoadRequestLoad.bind(this),this.loadRequest.onerror=this.onLoadRequestError.bind(this),this.loadRequest.send(),this.showProgress(b)},proto.onLoadRequestProgress=function(a){a.total&&this.showProgress(this.title,this.completeProgress*a.loaded/a.total)},proto.onLoadRequestLoad=function(){if(200!=this.loadRequest.status||!this.loadRequest.response.byteLength)return this.loadRequest=null,void this.showMessage("LOAD ERROR");var a=new Blob([this.loadRequest.response],{type:"text/javascript"});this.loadRequest=null;var b=document.createElement("script");b.src=window.URL.createObjectURL(a),b.onload=function(){this.completeProgress&&this.completeProgress<100?this.showProgress(this.title,this.completeProgress):this.hide(),this.onload&&this.onload()}.bind(this),document.getElementsByTagName("head")[0].appendChild(b)},proto.onLoadRequestError=function(){this.loadRequest=null,this.showMessage("LOAD ERROR")};